{"ast":null,"code":"import _classCallCheck from \"D:\\\\towards Future\\\\project1\\\\React client\\\\latestReact\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\towards Future\\\\project1\\\\React client\\\\latestReact\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\towards Future\\\\project1\\\\React client\\\\latestReact\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\towards Future\\\\project1\\\\React client\\\\latestReact\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"D:\\\\towards Future\\\\project1\\\\React client\\\\latestReact\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"D:\\\\towards Future\\\\project1\\\\React client\\\\latestReact\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\towards Future\\\\project1\\\\React client\\\\latestReact\\\\src\\\\components\\\\AdminComponents\\\\SignInForm.js\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport setAuthorizationHeader from \"./setAuthorizationHeader\";\nimport { connect } from \"react-redux\";\nimport jwt from \"jsonwebtoken\";\nimport { Rolling } from \"react-loading-io\";\nimport moment from \"moment\";\nimport * as consta from \"../constantValues\";\n\nvar SignInForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SignInForm, _React$Component);\n\n  function SignInForm(props) {\n    var _this;\n\n    _classCallCheck(this, SignInForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SignInForm).call(this, props));\n    _this.userName = \"\";\n    _this.password = \"\";\n    _this.formRef = null;\n    _this.loginTime = null;\n\n    _this.loader = function () {\n      return React.createElement(\"div\", {\n        className: \"loaderAdminLogin\",\n        ref: function ref(ree) {\n          return _this.loaderRef = ree;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34\n        },\n        __self: this\n      }, React.createElement(Rolling, {\n        size: 100,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35\n        },\n        __self: this\n      }));\n    };\n\n    _this.errs = {\n      color: \"red\"\n    };\n    _this.LoginHeading = {\n      \"padding-bottom\": \"5vh\",\n      \"padding-top\": \"4vh\",\n      \"font-family\": \"Cairo\",\n      \"font-weight\": \"bold\"\n    };\n    _this.loginForm = {\n      \"padding-left\": \"3%\"\n    };\n    _this.state = {\n      userName: null,\n      password: null,\n      passwordErr: \"\",\n      userNameErr: \"\",\n      error: null\n    };\n    _this.putLoginTime = _this.putLoginTime.bind(_assertThisInitialized(_this));\n    return _this;\n  } //the sloading spinner\n  // Use Component\n\n\n  _createClass(SignInForm, [{\n    key: \"setValues\",\n    value: function setValues() {\n      var _this2 = this;\n\n      if (this.state.userName === null && this.state.password === null) {\n        console.log(\" both wrong called\");\n        this.setState({\n          userNameErr: \"userName cannot be Empty \",\n          passwordErr: \"password cannot be Empty\",\n          error: null\n        });\n      } else {\n        if (this.state.userName === null) {\n          console.log(\" username wrong called\");\n          this.setState({\n            userNameErr: \"userName cannot be Empty \",\n            passwordErr: null,\n            error: null\n          });\n        } else if (this.state.password === null) {\n          console.log(\" password wrong called\");\n          this.setState({\n            userNameErr: null,\n            passwordErr: \"password cannot be Empty\",\n            error: null\n          });\n        } else {\n          // const data = {\n          //   email: this.state.userName,\n          //   password: this.state.password\n          // };\n          var data = {\n            email: \"joshuasinf52@gmail.com\",\n            password: \"sdfsdfsdff\"\n          }; //showing the loader\n\n          this.loaderRef.style.display = \"inline\"; //diming the background\n\n          this.formRef.style.opacity = 0.2;\n          axios.post(\"https://nh65v.sse.codesandbox.io/adminLoginRequest\", data).then(function (res) {\n            if (res.data.token) {\n              console.log(res.data.token);\n              localStorage.setItem(\"jwtToken\", res.data.token);\n              setAuthorizationHeader(res.data.token);\n              var user = jwt.decode(res.data.token);\n              var allAdmin = res.data.AllAdminDetail;\n              _this2.loaderRef.style.display = \"none\";\n\n              _this2.props.setUserInfo(user);\n\n              _this2.putLoginTime();\n\n              if (user.master === \"no\") {\n                _this2.props.updateRights({\n                  master: user.master,\n                  allAdmin: {}\n                });\n              } else {\n                _this2.props.updateRights({\n                  master: user.master,\n                  allAdmin: allAdmin\n                });\n              }\n            } else {\n              if (res.data.status === \"invalid\") {\n                _this2.setState({\n                  error: \"The entered Email or Password is Invalid\",\n                  userNameErr: null,\n                  passwordErr: null\n                });\n              } else if (res.data.status === \"InternalError\") {\n                _this2.setState({\n                  error: \"An error occured ,please try again\",\n                  userNameErr: null,\n                  passwordErr: null\n                });\n              }\n\n              _this2.loaderRef.style.display = \"none\";\n              _this2.formRef.style.opacity = 1;\n            }\n          }, function (err) {\n            alert(\"couldn't verify,please try again\");\n            _this2.loaderRef.style.display = \"none\";\n            _this2.formRef.style.opacity = 1;\n          });\n        }\n      }\n    }\n  }, {\n    key: \"putLoginTime\",\n    //get login time\n    value: function putLoginTime() {\n      localStorage.setItem(\"logInTime\", moment());\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      console.log(\"rendering again\", this.props.user1.user);\n      return React.createElement(React.Fragment, null, this.loader(), React.createElement(\"form\", {\n        style: this.loginForm,\n        ref: function ref(ree) {\n          _this3.formRef = ree;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        style: this.LoginHeading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, \"Login\"), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"control-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, \"UserName\"), React.createElement(\"input\", {\n        type: \"text\",\n        name: \"UserName\",\n        className: \"form-control\",\n        value: this.state.userName,\n        onChange: function onChange(e) {\n          if (e.target.value === \"\") {\n            _this3.setState({\n              userName: null\n            });\n          } else {\n            _this3.setState({\n              userName: e.target.value\n            });\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: this.errs,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, this.state.userNameErr)), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"control-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, \"password\"), React.createElement(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        className: \"form-control\",\n        value: this.state.password,\n        onChange: function onChange(e) {\n          if (e.target.value === \"\") {\n            _this3.setState({\n              password: null\n            });\n          } else {\n            _this3.setState({\n              password: e.target.value\n            });\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: this.errs,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, this.state.passwordErr))), this.state.error !== null ? React.createElement(\"div\", {\n        className: \"adminLoginError\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, this.state.error) : \" \", React.createElement(\"button\", {\n        className: \"btn btn-primary signInButton \",\n        onClick: function onClick() {\n          _this3.setValues();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, \"Sign In\"));\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {}\n  }]);\n\n  return SignInForm;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    user1: state.authReducer,\n    InLog: state.AdminLoginRights\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    setUserInfo: function setUserInfo(user) {\n      dispatch({\n        type: \"login\",\n        payload: user\n      });\n    },\n    updateRights: function updateRights(val) {\n      dispatch({\n        type: \"updateRights\",\n        payload: val\n      });\n    },\n    setAllAdminDetails: function setAllAdminDetails(val) {\n      dispatch({\n        type: \"AllAdminDetails\",\n        payload: val\n      });\n    },\n    setTimeout: function setTimeout(val) {\n      dispatch({\n        type: \"setTimeout\",\n        payload: val\n      });\n    },\n    logout: function logout(val) {\n      dispatch({\n        type: \"logOut\",\n        payload: val\n      });\n    },\n    setChoosenValue: function setChoosenValue(nam) {\n      dispatch({\n        type: \"toggle\",\n        payload: -1\n      });\n    },\n    logoutOnAdmin: function logoutOnAdmin() {\n      dispatch({\n        type: \"logoutOnAdmin\",\n        payload: \" \"\n      });\n    },\n    logoutForSideNav: function logoutForSideNav() {\n      dispatch({\n        type: \"logoutForSideNav\",\n        payload: \" \"\n      });\n    },\n    logoutForUpperMenu: function logoutForUpperMenu() {\n      dispatch({\n        type: \"logoutForUpperMenu\",\n        payload: \" \"\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SignInForm);","map":{"version":3,"sources":["D:/towards Future/project1/React client/latestReact/src/components/AdminComponents/SignInForm.js"],"names":["React","axios","setAuthorizationHeader","connect","jwt","Rolling","moment","consta","SignInForm","props","userName","password","formRef","loginTime","loader","ree","loaderRef","errs","color","LoginHeading","loginForm","state","passwordErr","userNameErr","error","putLoginTime","bind","console","log","setState","data","email","style","display","opacity","post","then","res","token","localStorage","setItem","user","decode","allAdmin","AllAdminDetail","setUserInfo","master","updateRights","status","err","alert","user1","e","target","value","setValues","Component","mapStateToProps","authReducer","InLog","AdminLoginRights","mapDispatchToProps","dispatch","type","payload","val","setAllAdminDetails","setTimeout","logout","setChoosenValue","nam","logoutOnAdmin","logoutForSideNav","logoutForUpperMenu"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport axios from \"axios\";\r\nimport setAuthorizationHeader from \"./setAuthorizationHeader\";\r\nimport { connect } from \"react-redux\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport { Rolling } from \"react-loading-io\";\r\nimport moment from \"moment\";\r\nimport * as consta from \"../constantValues\";\r\n\r\nclass SignInForm extends React.Component {\r\n  userName = \"\";\r\n  password = \"\";\r\n  formRef = null;\r\n  loginTime = null;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      userName: null,\r\n      password: null,\r\n      passwordErr: \"\",\r\n      userNameErr: \"\",\r\n      error: null\r\n    };\r\n\r\n    this.putLoginTime = this.putLoginTime.bind(this);\r\n  }\r\n\r\n  //the sloading spinner\r\n  // Use Component\r\n  loader = () => {\r\n    return (\r\n      <div className=\"loaderAdminLogin\" ref={ree => (this.loaderRef = ree)}>\r\n        <Rolling size={100} />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  //error style\r\n  errs = {\r\n    color: \"red\"\r\n  };\r\n\r\n  setValues() {\r\n    if (this.state.userName === null && this.state.password === null) {\r\n      console.log(\" both wrong called\");\r\n      this.setState({\r\n        userNameErr: \"userName cannot be Empty \",\r\n        passwordErr: \"password cannot be Empty\",\r\n        error: null\r\n      });\r\n    } else {\r\n      if (this.state.userName === null) {\r\n        console.log(\" username wrong called\");\r\n        this.setState({\r\n          userNameErr: \"userName cannot be Empty \",\r\n          passwordErr: null,\r\n          error: null\r\n        });\r\n      } else if (this.state.password === null) {\r\n        console.log(\" password wrong called\");\r\n        this.setState({\r\n          userNameErr: null,\r\n          passwordErr: \"password cannot be Empty\",\r\n          error: null\r\n        });\r\n      } else {\r\n        // const data = {\r\n        //   email: this.state.userName,\r\n        //   password: this.state.password\r\n        // };\r\n\r\n        const data = {\r\n          email: \"joshuasinf52@gmail.com\",\r\n          password: \"sdfsdfsdff\"\r\n        };\r\n\r\n        //showing the loader\r\n        this.loaderRef.style.display = \"inline\";\r\n\r\n        //diming the background\r\n        this.formRef.style.opacity = 0.2;\r\n\r\n        axios\r\n          .post(\"https://nh65v.sse.codesandbox.io/adminLoginRequest\", data)\r\n          .then(\r\n            res => {\r\n              if (res.data.token) {\r\n                console.log(res.data.token);\r\n                localStorage.setItem(\"jwtToken\", res.data.token);\r\n\r\n                setAuthorizationHeader(res.data.token);\r\n                var user = jwt.decode(res.data.token);\r\n                var allAdmin = res.data.AllAdminDetail;\r\n\r\n                this.loaderRef.style.display = \"none\";\r\n\r\n                this.props.setUserInfo(user);\r\n\r\n                this.putLoginTime();\r\n\r\n                if (user.master === \"no\") {\r\n                  this.props.updateRights({\r\n                    master: user.master,\r\n                    allAdmin: {}\r\n                  });\r\n                } else {\r\n                  this.props.updateRights({\r\n                    master: user.master,\r\n                    allAdmin: allAdmin\r\n                  });\r\n                }\r\n              } else {\r\n                if (res.data.status === \"invalid\") {\r\n                  this.setState({\r\n                    error: \"The entered Email or Password is Invalid\",\r\n                    userNameErr: null,\r\n                    passwordErr: null\r\n                  });\r\n                } else if (res.data.status === \"InternalError\") {\r\n                  this.setState({\r\n                    error: \"An error occured ,please try again\",\r\n                    userNameErr: null,\r\n                    passwordErr: null\r\n                  });\r\n                }\r\n\r\n                this.loaderRef.style.display = \"none\";\r\n                this.formRef.style.opacity = 1;\r\n              }\r\n            },\r\n            err => {\r\n              alert(\"couldn't verify,please try again\");\r\n              this.loaderRef.style.display = \"none\";\r\n              this.formRef.style.opacity = 1;\r\n            }\r\n          );\r\n      }\r\n    }\r\n  }\r\n\r\n  LoginHeading = {\r\n    \"padding-bottom\": \"5vh\",\r\n    \"padding-top\": \"4vh\",\r\n    \"font-family\": \"Cairo\",\r\n    \"font-weight\": \"bold\"\r\n  };\r\n\r\n  loginForm = { \"padding-left\": \"3%\" };\r\n\r\n  //get login time\r\n  putLoginTime() {\r\n    localStorage.setItem(\"logInTime\", moment());\r\n  }\r\n\r\n  render() {\r\n    console.log(\"rendering again\", this.props.user1.user);\r\n    return (\r\n      <>\r\n        {this.loader()}\r\n        <form\r\n          style={this.loginForm}\r\n          ref={ree => {\r\n            this.formRef = ree;\r\n          }}\r\n        >\r\n          <h1 style={this.LoginHeading}>Login</h1>\r\n          <div className=\"form-group\">\r\n            <label className=\"control-label\">UserName</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"UserName\"\r\n              className=\"form-control\"\r\n              value={this.state.userName}\r\n              onChange={e => {\r\n                if (e.target.value === \"\") {\r\n                  this.setState({ userName: null });\r\n                } else {\r\n                  this.setState({ userName: e.target.value });\r\n                }\r\n              }}\r\n            />\r\n            <div style={this.errs}>{this.state.userNameErr}</div>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label className=\"control-label\">password</label>\r\n            <input\r\n              type=\"password\"\r\n              name=\"password\"\r\n              className=\"form-control\"\r\n              value={this.state.password}\r\n              onChange={e => {\r\n                if (e.target.value === \"\") {\r\n                  this.setState({ password: null });\r\n                } else {\r\n                  this.setState({ password: e.target.value });\r\n                }\r\n              }}\r\n            />\r\n            <div style={this.errs}>{this.state.passwordErr}</div>\r\n          </div>\r\n        </form>\r\n        {this.state.error !== null ? (\r\n          <div className=\"adminLoginError\">{this.state.error}</div>\r\n        ) : (\r\n          \" \"\r\n        )}\r\n        <button\r\n          className=\"btn btn-primary signInButton \"\r\n          onClick={() => {\r\n            this.setValues();\r\n          }}\r\n        >\r\n          Sign In\r\n        </button>\r\n      </>\r\n    );\r\n  }\r\n\r\n  componentDidUpdate() {}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    user1: state.authReducer,\r\n    InLog: state.AdminLoginRights\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    setUserInfo: user => {\r\n      dispatch({\r\n        type: \"login\",\r\n        payload: user\r\n      });\r\n    },\r\n    updateRights: val => {\r\n      dispatch({\r\n        type: \"updateRights\",\r\n        payload: val\r\n      });\r\n    },\r\n    setAllAdminDetails: val => {\r\n      dispatch({\r\n        type: \"AllAdminDetails\",\r\n        payload: val\r\n      });\r\n    },\r\n    setTimeout: val => {\r\n      dispatch({\r\n        type: \"setTimeout\",\r\n        payload: val\r\n      });\r\n    },\r\n    logout: val => {\r\n      dispatch({\r\n        type: \"logOut\",\r\n        payload: val\r\n      });\r\n    },\r\n    setChoosenValue: nam => {\r\n      dispatch({\r\n        type: \"toggle\",\r\n        payload: -1\r\n      });\r\n    },\r\n    logoutOnAdmin: () => {\r\n      dispatch({\r\n        type: \"logoutOnAdmin\",\r\n        payload: \" \"\r\n      });\r\n    },\r\n    logoutForSideNav: () => {\r\n      dispatch({\r\n        type: \"logoutForSideNav\",\r\n        payload: \" \"\r\n      });\r\n    },\r\n    logoutForUpperMenu: () => {\r\n      dispatch({\r\n        type: \"logoutForUpperMenu\",\r\n        payload: \" \"\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(SignInForm);\r\n"]},"metadata":{},"sourceType":"module"}