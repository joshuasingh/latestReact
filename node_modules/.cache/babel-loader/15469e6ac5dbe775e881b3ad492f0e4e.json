{"ast":null,"code":"import _toConsumableArray from \"D:\\\\towards Future\\\\project1\\\\React client\\\\latestReact\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"D:\\\\towards Future\\\\project1\\\\React client\\\\latestReact\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\towards Future\\\\project1\\\\React client\\\\latestReact\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\towards Future\\\\project1\\\\React client\\\\latestReact\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\towards Future\\\\project1\\\\React client\\\\latestReact\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"D:\\\\towards Future\\\\project1\\\\React client\\\\latestReact\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"D:\\\\towards Future\\\\project1\\\\React client\\\\latestReact\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\towards Future\\\\project1\\\\React client\\\\latestReact\\\\src\\\\pages\\\\AdminPage.js\";\nimport React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport Heading from \"../components/Heading\";\nimport ExpandedView from \"../components/ExpandedView\";\nimport { Redirect } from \"react-router\";\nimport AdminSideNav from \"../components/AdminSideNav\";\nimport AdminUpperMenu from \"../components/AdminUpperMenu\";\nimport AdminDetailView from \"../components/AdminDetailView\";\nimport { connect } from \"react-redux\";\nimport CommonNavBar from \"../components/CommonNavBar\";\nimport IdleTimer from \"react-idle-timer\";\nimport * as consta from \"../components/constantValues\";\nimport { IdleTimeOutModal } from \"../components/AdminComponents/IdleTimeOutModal\";\n\nvar handleEvent = function handleEvent() {\n  return React.createElement(Redirect, {\n    to: \"/Expand\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16\n    },\n    __self: this\n  });\n};\n\nvar AdminPage =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AdminPage, _React$Component);\n\n  function AdminPage(props) {\n    var _this;\n\n    _classCallCheck(this, AdminPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AdminPage).call(this, props));\n    _this.refers = null;\n    _this.refers_SN = null;\n    _this.signed = true;\n    _this.Menu_items = [\"Add picture to HomeScreen ImageSlider\", \"Change Menu items\", \"Add pics to gallery\", \"settings\"];\n    _this.tab_Headings = [\"HomeScreen_Images\", \"Menu_items\", \"Gallery_pics\", \"settings\"];\n    _this.state = {\n      tempDataForHeader: [],\n      data1: _this.props.mainData,\n      ind: -1,\n      current: -1,\n      previous: -1,\n      timeout: consta.timeOutLimit,\n      userLoggedIn: false,\n      isTimedOut: false,\n      showModal: false\n    };\n    _this.idleTimer = null;\n    _this.onAction = _this._onAction.bind(_assertThisInitialized(_this));\n    _this.onActive = _this._onActive.bind(_assertThisInitialized(_this));\n    _this.onIdle = _this._onIdle.bind(_assertThisInitialized(_this));\n    _this.goBackToInitial = _this.goBackToInitial.bind(_assertThisInitialized(_this));\n    _this.addHeader = _this.addHeader.bind(_assertThisInitialized(_this));\n    _this.removeHeader = _this.removeHeader.bind(_assertThisInitialized(_this));\n    _this.getStatus = _this.getStatus.bind(_assertThisInitialized(_this));\n    _this.setDetail = _this.setDetail.bind(_assertThisInitialized(_this));\n    _this.getStatusFromSN = _this.getStatusFromSN.bind(_assertThisInitialized(_this));\n    _this.handleLogout = _this.handleLogout.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(AdminPage, [{\n    key: \"addHeader\",\n    //add tebs to upper menu\n    value: function addHeader(index) {\n      var tempArray = [];\n      tempArray = _toConsumableArray(this.state.tempDataForHeader);\n      if (!tempArray.includes(this.tab_Headings[index])) tempArray.push(this.tab_Headings[index]); //position of selected tab in header array\n\n      var positiontab = tempArray.indexOf(this.tab_Headings[index]); //highlight the selected tab in upper menu\n\n      this.props.switchTab(positiontab);\n      console.log(\"in changing tabs\", index); //setting state for the temp header data\n\n      this.setState({\n        tempDataForHeader: tempArray //   ind: index\n\n      });\n      this.props.setAdminDetailSelection(index);\n      localStorage.setItem(\"persistedArray\", JSON.stringify(tempArray));\n    } //if there is no tab present all nothing should shown on details view\n\n  }, {\n    key: \"goBackToInitial\",\n    value: function goBackToInitial() {\n      console.log(\"gone back to initial\");\n      this.refers.changeBackToStart();\n    } //get reference from the side nav bar\n\n  }, {\n    key: \"getStatusFromSN\",\n    value: function getStatusFromSN(ref) {\n      this.refers_SN = ref;\n    } //change detail tab data\n\n  }, {\n    key: \"setDetail\",\n    value: function setDetail(val) {\n      var index = this.tab_Headings.indexOf(val);\n      var temp = this.refers_SN.getSelectionValue();\n      console.log(\"setdetails of admin page\", index, temp[0]);\n      this.props.setAdminDetailSelection(index); //side nav through reducer\n\n      this.props.changeSelectedSide(temp[0], index);\n    }\n  }, {\n    key: \"removeHeader\",\n    value: function removeHeader(afterRemoval, value, lastInArray, selected) {\n      var index = this.state.tempDataForHeader.indexOf(value);\n      var current = null;\n\n      if (index === 0) {\n        if (index === this.state.tempDataForHeader.length - 1) {\n          current = -1;\n        } else {\n          current = this.tab_Headings.indexOf(this.state.tempDataForHeader[index + 1]);\n        }\n      } else {\n        current = this.tab_Headings.indexOf(this.state.tempDataForHeader[index - 1]);\n      }\n\n      var temp = this.refers_SN.getSelectionValue();\n      console.log(\"in afterRemoval\", afterRemoval.length, \" length \", this.state.tempDataForHeader.length - 1, selected);\n      localStorage.setItem(\"persistedArray\", JSON.stringify(afterRemoval)); //the tab being removed was already\n\n      if (selected) {\n        //Checking if all the tabs are cancelled so as to restore initial condition...\n        if (afterRemoval.length === 0) {\n          this.props.closeAllSideNav(temp[0]);\n        } else {\n          this.props.changeSelectedSide(temp[0], current);\n        } //for all detail view change here because selected one removed\n\n\n        this.setState({\n          tempDataForHeader: _toConsumableArray(afterRemoval)\n        });\n        this.props.setAdminDetailSelection(current);\n      } //if the tab being cancelled was not selected so no changes to be done in sideNav or detail view\n      else {\n          if (afterRemoval.length === 0) {\n            this.props.closeAllSideNav(temp[0]);\n          } //for all detail view change here nothing because the selected one wasn't removed\n\n\n          this.setState({\n            tempDataForHeader: _toConsumableArray(afterRemoval)\n          });\n        }\n    } //getting the reference of details tab\n\n  }, {\n    key: \"getStatus\",\n    value: function getStatus(refer) {\n      console.log(\"reference set\");\n      this.refers = refer;\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      if (this.state.tempDataForHeader.length === 0 && localStorage.getItem(\"persistedArray\") !== null) {\n        console.log(\"setting local first time\");\n        this.setState({\n          tempDataForHeader: JSON.parse(localStorage.getItem(\"persistedArray\"))\n        });\n      }\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate() {\n      return true;\n    } //handle logout in modal window\n\n  }, {\n    key: \"handleLogout\",\n    value: function handleLogout() {\n      this.props.logout(\"off\");\n      this.props.setChoosenValue();\n      this.props.logoutOnAdmin();\n      this.props.logoutForSideNav();\n      this.props.logoutForUpperMenu();\n    }\n  }, {\n    key: \"_onAction\",\n    value: function _onAction(e) {\n      console.log(\"in on ACtion\", e);\n      this.setState({\n        isTimedOut: false\n      });\n    }\n  }, {\n    key: \"_onActive\",\n    value: function _onActive(e) {\n      console.log(\"in on  active\", e);\n      this.setState({\n        isTimedOut: false\n      });\n    }\n  }, {\n    key: \"_onIdle\",\n    value: function _onIdle(e) {\n      console.log(\"user is idle\", e);\n      var isTimedOut = this.state.isTimedOut;\n\n      if (isTimedOut) {} else {\n        this.setState({\n          showModal: true\n        });\n        this.idleTimer.reset();\n        this.setState({\n          isTimedOut: true\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      console.log(\"admin page rrender called\", this.state.data1);\n      return React.createElement(React.Fragment, null, React.createElement(IdleTimeOutModal, {\n        showModal: this.state.showModal,\n        handleClose: this.handleClose,\n        handleLogout: this.handleLogout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }), React.createElement(IdleTimer, {\n        ref: function ref(_ref) {\n          _this2.idleTimer = _ref;\n        },\n        element: document,\n        onActive: this.onActive,\n        onIdle: this.onIdle,\n        onAction: this.onAction,\n        debounce: 250,\n        timeout: this.state.timeout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"AdminPage\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"AdminNavBar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, React.createElement(CommonNavBar, {\n        signed: this.signed,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"AdminUpperMenu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, React.createElement(AdminUpperMenu, {\n        tempDataForHeader: this.state.tempDataForHeader,\n        removeHeader: this.removeHeader,\n        setDetail: this.setDetail,\n        goBackToInitial: this.goBackToInitial,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"AdminSideNav\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, React.createElement(AdminSideNav, {\n        Menu_items: this.Menu_items,\n        addHeader: this.addHeader,\n        getStatusFromSN: this.getStatusFromSN,\n        current: this.state.current,\n        previous: this.state.previous,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"adminDetailView\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, React.createElement(AdminDetailView, {\n        getStatus: this.getStatus,\n        tempDataForHeader: this.state.tempDataForHeader,\n        data: this.state.data1,\n        fetchData: this.props.fetchData,\n        addDataReceived: this,\n        selectedInstant: this.state.ind,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return AdminPage;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    user1: state.authReducer\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    switchTab: function switchTab(value) {\n      dispatch({\n        type: \"switchTab\",\n        payload: value\n      });\n    },\n    changeSelectedSide: function changeSelectedSide(previous, current) {\n      dispatch({\n        type: \"changeSelectedSide\",\n        payload: {\n          previous: previous,\n          current: current\n        }\n      });\n    },\n    closeAllSideNav: function closeAllSideNav(value) {\n      dispatch({\n        type: \"closeAllSideNav\",\n        payload: value\n      });\n    },\n    setAdminDetailSelection: function setAdminDetailSelection(value) {\n      dispatch({\n        type: \"setAdminDetailSelection\",\n        payload: value\n      });\n    },\n    logout: function logout(val) {\n      dispatch({\n        type: \"logOut\",\n        payload: val\n      });\n    },\n    setChoosenValue: function setChoosenValue(nam) {\n      dispatch({\n        type: \"toggle\",\n        payload: -1\n      });\n    },\n    logoutOnAdmin: function logoutOnAdmin() {\n      dispatch({\n        type: \"logoutOnAdmin\",\n        payload: \" \"\n      });\n    },\n    logoutForSideNav: function logoutForSideNav() {\n      dispatch({\n        type: \"logoutForSideNav\",\n        payload: \" \"\n      });\n    },\n    logoutForUpperMenu: function logoutForUpperMenu() {\n      dispatch({\n        type: \"logoutForUpperMenu\",\n        payload: \" \"\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AdminPage);","map":{"version":3,"sources":["D:/towards Future/project1/React client/latestReact/src/pages/AdminPage.js"],"names":["React","useState","useEffect","Heading","ExpandedView","Redirect","AdminSideNav","AdminUpperMenu","AdminDetailView","connect","CommonNavBar","IdleTimer","consta","IdleTimeOutModal","handleEvent","AdminPage","props","refers","refers_SN","signed","Menu_items","tab_Headings","state","tempDataForHeader","data1","mainData","ind","current","previous","timeout","timeOutLimit","userLoggedIn","isTimedOut","showModal","idleTimer","onAction","_onAction","bind","onActive","_onActive","onIdle","_onIdle","goBackToInitial","addHeader","removeHeader","getStatus","setDetail","getStatusFromSN","handleLogout","index","tempArray","includes","push","positiontab","indexOf","switchTab","console","log","setState","setAdminDetailSelection","localStorage","setItem","JSON","stringify","changeBackToStart","ref","val","temp","getSelectionValue","changeSelectedSide","afterRemoval","value","lastInArray","selected","length","closeAllSideNav","refer","getItem","parse","logout","setChoosenValue","logoutOnAdmin","logoutForSideNav","logoutForUpperMenu","e","reset","handleClose","document","fetchData","Component","mapStateToProps","user1","authReducer","mapDispatchToProps","dispatch","type","payload","nam"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport Heading from \"../components/Heading\";\r\nimport ExpandedView from \"../components/ExpandedView\";\r\nimport { Redirect } from \"react-router\";\r\nimport AdminSideNav from \"../components/AdminSideNav\";\r\nimport AdminUpperMenu from \"../components/AdminUpperMenu\";\r\nimport AdminDetailView from \"../components/AdminDetailView\";\r\nimport { connect } from \"react-redux\";\r\nimport CommonNavBar from \"../components/CommonNavBar\";\r\nimport IdleTimer from \"react-idle-timer\";\r\nimport * as consta from \"../components/constantValues\";\r\nimport { IdleTimeOutModal } from \"../components/AdminComponents/IdleTimeOutModal\";\r\n\r\nconst handleEvent = () => {\r\n  return <Redirect to=\"/Expand\" />;\r\n};\r\n\r\nclass AdminPage extends React.Component {\r\n  refers = null;\r\n  refers_SN = null;\r\n  signed = true;\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      tempDataForHeader: [],\r\n      data1: this.props.mainData,\r\n      ind: -1,\r\n      current: -1,\r\n      previous: -1,\r\n      timeout: consta.timeOutLimit,\r\n      userLoggedIn: false,\r\n      isTimedOut: false,\r\n      showModal: false\r\n    };\r\n\r\n    this.idleTimer = null;\r\n    this.onAction = this._onAction.bind(this);\r\n    this.onActive = this._onActive.bind(this);\r\n    this.onIdle = this._onIdle.bind(this);\r\n    this.goBackToInitial = this.goBackToInitial.bind(this);\r\n    this.addHeader = this.addHeader.bind(this);\r\n    this.removeHeader = this.removeHeader.bind(this);\r\n    this.getStatus = this.getStatus.bind(this);\r\n    this.setDetail = this.setDetail.bind(this);\r\n    this.getStatusFromSN = this.getStatusFromSN.bind(this);\r\n    this.handleLogout = this.handleLogout.bind(this);\r\n  }\r\n\r\n  Menu_items = [\r\n    \"Add picture to HomeScreen ImageSlider\",\r\n    \"Change Menu items\",\r\n    \"Add pics to gallery\",\r\n    \"settings\"\r\n  ];\r\n\r\n  tab_Headings = [\r\n    \"HomeScreen_Images\",\r\n    \"Menu_items\",\r\n    \"Gallery_pics\",\r\n    \"settings\"\r\n  ];\r\n\r\n  //add tebs to upper menu\r\n  addHeader(index) {\r\n    var tempArray = [];\r\n    tempArray = [...this.state.tempDataForHeader];\r\n    if (!tempArray.includes(this.tab_Headings[index]))\r\n      tempArray.push(this.tab_Headings[index]);\r\n\r\n    //position of selected tab in header array\r\n    var positiontab = tempArray.indexOf(this.tab_Headings[index]);\r\n\r\n    //highlight the selected tab in upper menu\r\n    this.props.switchTab(positiontab);\r\n\r\n    console.log(\"in changing tabs\", index);\r\n    //setting state for the temp header data\r\n    this.setState({\r\n      tempDataForHeader: tempArray\r\n      //   ind: index\r\n    });\r\n\r\n    this.props.setAdminDetailSelection(index);\r\n\r\n    localStorage.setItem(\"persistedArray\", JSON.stringify(tempArray));\r\n  }\r\n\r\n  //if there is no tab present all nothing should shown on details view\r\n  goBackToInitial() {\r\n    console.log(\"gone back to initial\");\r\n    this.refers.changeBackToStart();\r\n  }\r\n\r\n  //get reference from the side nav bar\r\n  getStatusFromSN(ref) {\r\n    this.refers_SN = ref;\r\n  }\r\n\r\n  //change detail tab data\r\n  setDetail(val) {\r\n    var index = this.tab_Headings.indexOf(val);\r\n\r\n    var temp = this.refers_SN.getSelectionValue();\r\n    console.log(\"setdetails of admin page\", index, temp[0]);\r\n\r\n    this.props.setAdminDetailSelection(index);\r\n\r\n    //side nav through reducer\r\n    this.props.changeSelectedSide(temp[0], index);\r\n  }\r\n\r\n  removeHeader(afterRemoval, value, lastInArray, selected) {\r\n    var index = this.state.tempDataForHeader.indexOf(value);\r\n\r\n    var current = null;\r\n    if (index === 0) {\r\n      if (index === this.state.tempDataForHeader.length - 1) {\r\n        current = -1;\r\n      } else {\r\n        current = this.tab_Headings.indexOf(\r\n          this.state.tempDataForHeader[index + 1]\r\n        );\r\n      }\r\n    } else {\r\n      current = this.tab_Headings.indexOf(\r\n        this.state.tempDataForHeader[index - 1]\r\n      );\r\n    }\r\n\r\n    var temp = this.refers_SN.getSelectionValue();\r\n\r\n    console.log(\r\n      \"in afterRemoval\",\r\n      afterRemoval.length,\r\n      \" length \",\r\n      this.state.tempDataForHeader.length - 1,\r\n      selected\r\n    );\r\n\r\n    localStorage.setItem(\"persistedArray\", JSON.stringify(afterRemoval));\r\n\r\n    //the tab being removed was already\r\n    if (selected) {\r\n      //Checking if all the tabs are cancelled so as to restore initial condition...\r\n      if (afterRemoval.length === 0) {\r\n        this.props.closeAllSideNav(temp[0]);\r\n      } else {\r\n        this.props.changeSelectedSide(temp[0], current);\r\n      }\r\n\r\n      //for all detail view change here because selected one removed\r\n      this.setState({\r\n        tempDataForHeader: [...afterRemoval]\r\n      });\r\n\r\n      this.props.setAdminDetailSelection(current);\r\n    } //if the tab being cancelled was not selected so no changes to be done in sideNav or detail view\r\n    else {\r\n      if (afterRemoval.length === 0) {\r\n        this.props.closeAllSideNav(temp[0]);\r\n      }\r\n\r\n      //for all detail view change here nothing because the selected one wasn't removed\r\n      this.setState({\r\n        tempDataForHeader: [...afterRemoval]\r\n      });\r\n    }\r\n  }\r\n\r\n  //getting the reference of details tab\r\n  getStatus(refer) {\r\n    console.log(\"reference set\");\r\n    this.refers = refer;\r\n  }\r\n\r\n  componentWillMount() {\r\n    if (\r\n      this.state.tempDataForHeader.length === 0 &&\r\n      localStorage.getItem(\"persistedArray\") !== null\r\n    ) {\r\n      console.log(\"setting local first time\");\r\n      this.setState({\r\n        tempDataForHeader: JSON.parse(localStorage.getItem(\"persistedArray\"))\r\n      });\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate() {\r\n    return true;\r\n  }\r\n\r\n  //handle logout in modal window\r\n  handleLogout() {\r\n    this.props.logout(\"off\");\r\n    this.props.setChoosenValue();\r\n    this.props.logoutOnAdmin();\r\n    this.props.logoutForSideNav();\r\n    this.props.logoutForUpperMenu();\r\n  }\r\n\r\n  _onAction(e) {\r\n    console.log(\"in on ACtion\", e);\r\n    this.setState({ isTimedOut: false });\r\n  }\r\n\r\n  _onActive(e) {\r\n    console.log(\"in on  active\", e);\r\n    this.setState({ isTimedOut: false });\r\n  }\r\n\r\n  _onIdle(e) {\r\n    console.log(\"user is idle\", e);\r\n    const isTimedOut = this.state.isTimedOut;\r\n    if (isTimedOut) {\r\n    } else {\r\n      this.setState({ showModal: true });\r\n      this.idleTimer.reset();\r\n      this.setState({ isTimedOut: true });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    console.log(\"admin page rrender called\", this.state.data1);\r\n    return (\r\n      <>\r\n        <IdleTimeOutModal\r\n          showModal={this.state.showModal}\r\n          handleClose={this.handleClose}\r\n          handleLogout={this.handleLogout}\r\n        />\r\n        <IdleTimer\r\n          ref={ref => {\r\n            this.idleTimer = ref;\r\n          }}\r\n          element={document}\r\n          onActive={this.onActive}\r\n          onIdle={this.onIdle}\r\n          onAction={this.onAction}\r\n          debounce={250}\r\n          timeout={this.state.timeout}\r\n        />\r\n        <div className=\"AdminPage\">\r\n          <div className=\"AdminNavBar\">\r\n            <CommonNavBar signed={this.signed} />\r\n          </div>\r\n          <div className=\"AdminUpperMenu\">\r\n            <AdminUpperMenu\r\n              tempDataForHeader={this.state.tempDataForHeader}\r\n              removeHeader={this.removeHeader}\r\n              setDetail={this.setDetail}\r\n              goBackToInitial={this.goBackToInitial}\r\n            />\r\n          </div>\r\n          <div className=\"AdminSideNav\">\r\n            <AdminSideNav\r\n              Menu_items={this.Menu_items}\r\n              addHeader={this.addHeader}\r\n              getStatusFromSN={this.getStatusFromSN}\r\n              current={this.state.current}\r\n              previous={this.state.previous}\r\n            />\r\n          </div>\r\n          <div className=\"adminDetailView\">\r\n            <AdminDetailView\r\n              getStatus={this.getStatus}\r\n              tempDataForHeader={this.state.tempDataForHeader}\r\n              data={this.state.data1}\r\n              fetchData={this.props.fetchData}\r\n              addDataReceived={this}\r\n              selectedInstant={this.state.ind}\r\n            />\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    user1: state.authReducer\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    switchTab: value => {\r\n      dispatch({\r\n        type: \"switchTab\",\r\n        payload: value\r\n      });\r\n    },\r\n    changeSelectedSide: (previous, current) => {\r\n      dispatch({\r\n        type: \"changeSelectedSide\",\r\n        payload: { previous, current }\r\n      });\r\n    },\r\n    closeAllSideNav: value => {\r\n      dispatch({\r\n        type: \"closeAllSideNav\",\r\n        payload: value\r\n      });\r\n    },\r\n    setAdminDetailSelection: value => {\r\n      dispatch({\r\n        type: \"setAdminDetailSelection\",\r\n        payload: value\r\n      });\r\n    },\r\n    logout: val => {\r\n      dispatch({\r\n        type: \"logOut\",\r\n        payload: val\r\n      });\r\n    },\r\n    setChoosenValue: nam => {\r\n      dispatch({\r\n        type: \"toggle\",\r\n        payload: -1\r\n      });\r\n    },\r\n    logoutOnAdmin: () => {\r\n      dispatch({\r\n        type: \"logoutOnAdmin\",\r\n        payload: \" \"\r\n      });\r\n    },\r\n    logoutForSideNav: () => {\r\n      dispatch({\r\n        type: \"logoutForSideNav\",\r\n        payload: \" \"\r\n      });\r\n    },\r\n    logoutForUpperMenu: () => {\r\n      dispatch({\r\n        type: \"logoutForUpperMenu\",\r\n        payload: \" \"\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(AdminPage);\r\n"]},"metadata":{},"sourceType":"module"}